---
type: "manual"
---

基于机器运行记录页面的架构和设计模式，创建新的原矿进料记录页面，并与现有的Supabase数据表"原矿进料记录"建立完整的数据连接。具体要求如下：

**页面路由**: `/raw-material-feeding-record`

**数据库集成要求**:
1. **数据表连接**: 连接到现有的Supabase数据表"原矿进料记录"
2. **字段映射**: 建立前端表单字段与数据库字段的正确映射关系
   - 前端"日期"字段 → 数据库"日期"字段
   - 前端"班次"字段 → 数据库"班次"字段（白班/夜班）
   - 前端"进料量"字段 → 数据库"进料量"字段
   - 前端"操作员"字段 → 数据库"操作员"字段（自动获取当前登录用户）
3. **数据同步机制**: 
   - 表单提交时自动将数据写入"原矿进料记录"数据表
   - 历史记录区域实时读取数据表中的现有数据
   - 实现完整的CRUD操作（创建、读取、更新、删除）

**页面结构**:
1. **Header组件**: 使用Header-1组件（汉堡菜单-居中标题-主题切换布局）
   - 标题: "原矿进料记录"
   - 副标题: "原矿进料数据记录和管理系统"
   - 图标: 使用Lucide React图标库中的相关图标

2. **新增记录表单区域**:
   - **日期选择**: Input组件，type="date"，默认当前日期，Label样式与filter-press-workshop页面保持一致
   - **班次选择**: RadioGroup组件，平铺单选式设计，选项包括"白班"和"夜班"，参考machine-operation-record页面的设备状态选择样式
   - **进料量计算器**: 创建专用的进料计算器组件，参考项目中现有计算器的UI设计
     - 起始读数输入框（数字类型，单位：吨，placeholder："请输入起始读数"）
     - 结束读数输入框（数字类型，单位：吨，placeholder："请输入结束读数"）
     - 实时计算显示：计算结果 = 结束读数 - 起始读数，显示格式"计算结果: XX.XX 吨"
     - "一键填入"按钮：将计算结果自动填入进料量主输入框
     - 进料量主输入框：显示最终的进料量数值，支持手动编辑
   - **提交按钮**: 包含加载状态和禁用状态处理

3. **历史记录区域**:
   - 使用Table组件展示从"原矿进料记录"数据表读取的历史数据
   - 表格列顺序：操作、日期、班次、进料量(t)、操作员、创建时间
   - 分页功能：每页显示10条记录，包含完整的分页控件（上一页、页码按钮、下一页）
   - 操作按钮：编辑、删除（参考machine-operation-record页面的操作按钮样式和功能）
   - 数据排序：按创建时间倒序显示（最新记录在前）

4. **数据操作功能**:
   - **新增记录**: 表单提交后调用Supabase API将数据插入"原矿进料记录"表
   - **编辑记录**: 支持修改现有记录，使用Dialog组件显示编辑表单
   - **删除记录**: 确认删除后从数据表中移除记录
   - **数据验证**: 确保必填字段完整，进料量为正数
   - **错误处理**: 完整的错误处理机制，包括网络错误、数据验证错误等

5. **用户体验优化**:
   - **自动用户识别**: 自动获取当前登录用户信息作为操作员字段
   - **加载状态**: 数据获取和提交时显示加载指示器
   - **成功反馈**: 操作成功后显示toast提示
   - **实时更新**: 新增/编辑/删除操作后自动刷新历史记录列表

6. **底部组件**: 使用Footer组件显示统一的底部签名"FDX@2025 滇ICP备2025058380号"

**技术实现要求**:
- 严格遵循项目的组件优先级规范（现有组件 > shadcn/ui组件 > 自定义组件）
- 使用Lucide React图标库，完全避免表情符号，图标尺寸保持一致性(h-4 w-4或h-5 w-5)
- 确保响应式设计，适配移动端和桌面端
- 使用Supabase API方法进行数据库操作，而非直接数据库连接
- 实现基于日期+班次的智能UPSERT逻辑（存在则更新，不存在则插入）
- 包含完整的TypeScript类型定义

**参考文件和标准**:
- 主要架构参考：`src/app/machine-operation-record/page.tsx`
- 日期选择组件标准：以filter-press-workshop页面为模板的Input+type='date'+统一Label样式
- Header布局标准：Header-1组件（汉堡菜单-居中标题-主题切换）
- 分页功能参考：machine-operation-record页面的分页实现
- 图标设计标准：遵循.augment-guidelines\设计指南\icon-standards.md规范